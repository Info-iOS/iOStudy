# REST API

---

REST란? 자원의 이름을 구분하여서 상태 정보를 주고 받는 모든 것

자원이란 해당 소프트웨어가 관리하는 모든 것

상태 정보란 데이터가 요청되어지는 시점에서 자원의 상태를 전달하는것(JSON, XML)

## REST 구체적으로 파기

- HTTP URL를 통해 자원을 명시하고 HTTP Method(post, get, put, delete)를 통해서 자원에 대한 crud operation을 적용하는 것을 의미한다

What is CRUD Operation

- Create: 생성(POST)
- Read: 조회(GET)
- Update: 수정(PUT)
- Delete: 삭제(DELETE)
- HEAD: header 정보 조회

## REST의 장점

- HTTP 프로토콜의 인프라를 사용하기 때문에 REST API를 위한 별도의 인프라 구축이 필요 없다
- HTTP 프로토콜을 최대한 사용하여 여러 장점이 생길 수 있다
- 모든 플렛톰에서 사용할 수 있다
- 서비스 디자인에 생길 수 있는 문제를 최소화 한다
- 서버와 클라이언트의 역활을 명확하게 분리한다

## REST의 단점

- 표준이라는 것이 없다
- 메소드가 4개 밖에 없다
- 구형 브라우저는 PUT, DELETE를 사용하지 못한다

## REST의 필요이유

- 다양한 클라이언트의 등장
- 다양한 브라우저의 디바이스 통신을 할 수 있다

# REST의 구성요성

### 자원(URL)

- 모든 자원에 고유한 ID가 존재하고, 이 자원은 Server에 존재한다
- 자원을 구별하는 ID는 HTTP URL이다
- 클라이언트는 URL를 이용해서 자원을 지정하고 해당 자원의 상태를 조작하는 Server에 요청한다

### 행위(Verb)

- HTTP 프로토콜릐 Method를 이용한다
- HTTP 프로토콜은 GET, POST, PUT, DELETE를 제공한다

### 표현(Representation of Resource)

- 클라이언트가 자원의 상태에 대한 조작을 요청하면 Server는 응답을 보낸다
- REST에서 하나의 자원은 JSON, XML, TEXT, RSS등의 형식이 있다
- JSON, XML이 데이터를 주고 받는 것이 일반적이다

# REST 특징

### Server-Client(서버-클라이언트 구조)

- 자원이 있는 쪽 서버, 자원을 요청하는 클라이언트
- 서로간의 의존성이 줄어든다
- REST Server: API를 제공하고 비즈니스 로직 처리 및 저장을 책임진다
- 클라이언트: 사용자 인증이나 context 등을 직접 관리한다

### Stateless(무상태)

- HTTP 프로토콜은 Stateless Protocol이므로 REST 역시 무상태성을 가진다
- 클라이언트는context를 Server에 저장하지 않는다
- Server는 각각의 요청을 완전히 별개의 것으로 인식하고 처리한다

### Cacheable(캐시 처리 기능)

- 웹 표준 HTTP 프로토콜을 그대로 사용하므로 웹에서 사용하는 기존의 인프라를 그대로 활용할 수 있다
- 대량의 요청을 효율적으로 처리하기 위해 캐시가 요구된다
- 캐시 사용을 통해 응답시간이 빨라지고 RESTServer 트랜잭션이 발생하지 않기 때문에 전체 응답시간, 성능, 서버의 자원 이용률을 향상시킬 수 있다

# REST API의 개념

### What is REST API

API = 데이터와 기능의 집합을 제공하여 컴퓨터 프로그램 간 상호작용을 촉진하여 서로 정보를 교환하도록 하는 것

### REST API

REST를 기반으로 하는 API를 구현 하는 것

### REST API의 특징

- REST는 HTTP 표준 기반으로 구현하므로, HTTP를 지원하는 프로그램 언어로 클라이언트, 서버를 구현할 수 있다
- REST API를 제작하면 델파이 클라이언트 뿐 아니라, 자바 등등을 이용해서 클라이언트가 직접 제작할 수 있다

### REST API 설계 기본 규칙

// 도큐먼트: 객체 인스턴스나 데이터베이스의 레코더와 비슷한 계념

// 컬렉션: 서버에서 관리하는 디렉터리라는 리소스

// 스토어: 클라이언트에서 관리하는 리소스 저장소

1. URI는 정보의 자원을 표현해야 한다
- resource는 명사와 소문자를 사용하다
- resource의 도큐먼트 이름은 단수 명사를 사용한다
- resource의 컬렉션으로는 복수 명사를 사용한다
- resource의 스토어 이름으로는 복수 명사를 사용한다

1. 자원에 대한 행위는 HTTP Method로 표현한다
- URI에는 HTTP Method가 들어가면 안된다
- URl에 행위에 대한 동사 표현이 들어가면 안된다
- 경로 부분 중 변하는 부분은 유일한 값으로 대체한다

## REST API 설계 규칙

1. 슬래시 구분자(/) 는 계층관계를 나타내는데 사용한다
2. URI 마지막 문자로 슬래시를 포함하지 않는다
3. 하이픈 (-)은 가독성을 높이는데 사용한다)
- iOS와 협업할 때는 iOS가 귀찮아질 수 있으니 하이픈보다는 카멜케이스로 주는 것이 배려다(iOS 개발자)
1. 밑줄은 URI 사용하지 않는다
2. URI 경로에 소문자가 적합하다

## REST API 설계 예시

![스크린샷 2022-11-22 오후 4.48.25.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b1f11635-ad3e-4950-ba10-7ddd6410ba08/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-11-22_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.48.25.png)

# 응답코드

- 100번때 = 전송 프로토콜 수준의 정보 교환
- 200번때 = 클라이언트의 요청이 성공적으로 수행됨
- 300번떄 = 클라이언트는 요청을 완료하기 위해 추가적인 행동을 취해야함
- 400번때 = 클라이언트의 잘못됨 요청
- 500번때 = 서버쪽의 오류

쉽게 정리 

100번때, 300번때 보기 좀 힘듬

200번때 서버와 클라이언트가 사이가 돈독해짐

400번때 클라이언트는 서버한테 욕을 먹을 짓을 함

500번때 묻지말고 서버 때리러가면됨

## 궁금한거 해결

PUT vs PATCH

PUT는 리소스의 모든 것을 업데이트합니다

PATCH는 리소스의 일부를 업데이트합니다

[https://velog.io/@vagabondms/기술-스터디-PUT과-PATCH-차이](https://velog.io/@vagabondms/%EA%B8%B0%EC%88%A0-%EC%8A%A4%ED%84%B0%EB%94%94-PUT%EA%B3%BC-PATCH-%EC%B0%A8%EC%9D%B4)
